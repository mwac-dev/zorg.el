* Changelog

** [Mon Sep 30 2025] - AI Agent Refactoring

*** Added
- Configurable AI CLI command: New `zorg-ai-cli-command` variable (default: "copilot") allows any AI CLI tool
- WIP (see Known Bug) Auto-restart functionality: New `zorg-ai-cli-restart-if-not-running` variable (default: t) automatically restarts dead processes
- Interactive configuration: New `zorg-set-ai-cli-command` function for easy AI CLI setup
- Process management: Intelligent detection of whether AI CLI processes are running vs. dead
- Enhanced documentation: Updated README with comprehensive AI agent configuration examples

*** Changed
- Function naming: `zorg-ai-copilot` renamed to `zorg-ai-agent` for generic terminology
- Buffer naming: AI CLI now uses `*zorg-agent*` instead of `*zorg-copilot*` 
- State management: AI state variables updated to use 'agent instead of 'copilot
- Generic terminology: All documentation and comments updated to use "agent" instead of "copilot"

*** Backward Compatibility
- Compatibility alias: `zorg-ai-copilot` still works as an alias to `zorg-ai-agent`
- Default behavior: "copilot" remains the default command for existing users
- Configuration preservation: All existing customizations continue to work

*** Known Bug
- right now if you manually exit out of the agent cli, re-toggling the agent via zorg-ai-agent will simply open the buffer but not actually restart the process. You will either need to manually call the cli at this point yourself, or delete the buffer completely and then re-toggle.

** [Mon Sep 29 2025] - Start AI Integration and Better Side Panel Handling

*** Fixed
- Percentage-based saving: `zorg-save-fractions` now properly captures and saves actual percentage values from current window widths instead of incorrect column values
- AI panel configuration: AI tools (gptel, copilot CLI) now respect the configurable `zorg-ai-side` variable and open in the correct side panel
- Seamless AI switching: AI tools now seamlessly preserve and restore panel states when toggling on/off or switching between tools

*** Added
- Configurable AI side: New `zorg-ai-side` variable (defaults to 'right; can be set to 'left) to control which panel AI tools use
- Improved state management: AI tools now properly save and restore the previous panel state
- Updated documentation: Added AI integration documentation and updated README with new configuration options
- Debug improvements: Enhanced `zorg-debug-widths` to show AI configuration state

*** Changed
- Fraction capture: Toggle functions now properly save current window fractions when panels are disabled
- Custom variables cleanup: Removed obsolete column-based custom variables from custom.el
- Generic AI helpers: Refactored AI state management to work with either left or right panels

*** Technical Details
- Added `zorg--save-ai-state()` and `zorg--restore-ai-state()` for generic panel state management
- Added `zorg--ensure-ai-panel()` and `zorg--get-ai-window()` helper functions
- Updated `zorg--capture-fractions()` to save to both live config and saved fraction variables
- Enhanced error handling in custom variable cleanup

This update ensures that:
1. Panel widths are correctly saved as percentages and restored properly
2. AI tools open in the user-configured side panel (left or right)
3. Switching between AI tools or toggling them feels seamless and preserves previous states
